

### 网络基础 TCP/IP

#### TCP/IP 协议族

通常使用的网络（包括互联网）是在 TCP/IP 协议族的基础上运作 的。而 HTTP 属于它内部的一个子集。**协议**（protocol）中存在各式各样的内容。从电缆的规格到 IP 地址的选定方法、 寻找异地用户的方法、双方建立通信的顺序，以及 Web 页面显示需 要处理的步骤，等等。像这样把与互联网相关联的协议集合起来总称为 **TCP/IP**。

#### TCP/IP 的分层管理

TCP/IP 协议族按层次分别分为 4 层：应用层、传输层、网络层和数据链路层。

- 应用层

应用层决定了向用户提供应用服务时通信的活动。TCP/IP 协议族内预存了各类通用的应用服务。比如，FTP（File Transfer Protocol，文件传输协议）和 DNS（Domain Name System，域名系统）服务就是其中两类。HTTP 协议也处于该层。

- 传输层

传输层对上层应用层，提供处于网络连接中的两台计算机之间的数据传输。在传输层有两个性质不同的协议：TCP（Transmission Control Protocol，传输控制协议）和 UDP（User Data Protocol，用户数据报协议）。

- 网络层

网络层用来处理在网络上流动的数据包。数据包是网络传输的最小数 据单位。该层规定了通过怎样的路径（所谓的传输路线）到达对方计 算机，并把数据包传送给对方。与对方计算机之间通过多台计算机或网络设备进行传输时，网络层所起的作用就是在众多的选项内选择一条传输路线

- 数据链路层

用来处理连接网络的硬件部分。包括控制操作系统、硬件的设备驱动、NIC（Network Interface Card，网络适配器，即网卡），及光纤等物理可见部分（还包括连接器等一切传输媒介）。硬件上的范畴均在链路层的作用范围之内。

<!--20190705-->

### 简单的 HTTP 协议

#### HTTP与其特点

HTTP 协议和 TCP/IP 协议族内的其他众多的协议相同，用于客户端和服务器之间的通信。

HTTP 协议规定，请求从客户端发出，最后服务器端响应该请求并返回。

HTTP 是一种不保存状态，即无状态（stateless）协议。

HTTP 协议使用 URI 定位互联网上的资源。

**持久连接**节省通信量，只要任意一端没有明确提出断开连接，则保持 TCP 连接状态。

**管线化**技术，使得不用等待响应亦可直接发送下一个请求。

使用 **Cookie** 的状态管理：Cookie 会根据从服务器端发送的响应报文内的一个叫做 Set-Cookie 的 首部字段信息，通知客户端保存 Cookie。当下次客户端再往该服务器 发送请求时，客户端会自动在请求报文中加入 Cookie 值后发送出 去。
服务器端发现客户端发送过来的 Cookie 后，会去检查究竟是从哪一 个客户端发来的连接请求，然后对比服务器上的记录，最后得到之前 的状态信息。

#### HTTP 方法

- GET ：获取资源
- POST：传输实体主体
- PUT：传输文件
- HEAD：获得报文首部
- DELETE：删除文件
- OPTIONS：询问支持的方法
- TRACE：追踪路径
- CONNECT：要求用隧道协议连接代理

### HTTP 报文内的 HTTP 信息

略

### 返回结果的 HTTP 状态码

#### 状态码及常见类别

状态码告知从服务器端返回的请求结果

- 2XX 成功
  - 200 OK：正常
  - 204 No Content：不包含内容
  - 206 Partial Content：范围请求
- 3XX 重定向
  - 301 Moved Permanently：永久性重定向。
  - 302 Found：临时性重定向。
  - 303 See Other：应使用GET指令访问资源
  - 304 Not Modified：找到但不符合条件
- 4XX 客户端错误
  - 400 Bad Request：语法错误。
  - 401 Unauthorized：认证失败。（之前进行一次尝试认证）
  - 403 Forbidden：禁止访问。
  - 404 Not Found：无法找到。
- 5XX 服务器错误
  - 500 Internal Server Error：服务端故障
  - 503 Service Unavailable：服务器暂时无法响应请求

### 与 HTTP 协作的 Web 服 务

通过虚拟主机在一个服务器上有多个域名。

通信数据转发程序 ：代理、网关、隧道

保存资源的缓存，指代理服务器或客户端本地磁盘内保存的资源副本。

### HTTP 首部

略

### 确保 Web 安全的 HTTPS

#### 防止被窃听

##### 通信的加密

通过和 SSL（Secure Socket Layer，安全套接层）或 TLS（Transport Layer Security，安全层传输协议）的组合使用， 加密 HTTP 的通信内容。
用 SSL 建立安全通信线路之后，就可以在这条线路上进行 HTTP 通信了。与 SSL 组合使用的 HTTP 被称为 HTTPS（HTTP Secure，超文本传输安全协议）或 HTTP over SSL。

##### 内容的加密

对 HTTP 协议传输的内容本身加密。即把 HTTP 报文里所含的内容进行加密处理。
在这种情况下，客户端需要对 HTTP 报文进行加密处理后再发送 请求。

#### 防止伪装

##### 客户端伪装

待解决

##### 服务器伪装

查明证书

#### 防止内容遭到篡改

校验MD5、数字签名。

<!--20190706-->

### 参考资料

《图解HTTP》-上野宣

